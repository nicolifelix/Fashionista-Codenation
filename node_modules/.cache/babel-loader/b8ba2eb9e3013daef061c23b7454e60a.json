{"ast":null,"code":"var _jsxFileName = \"/Users/nicoli/Documents/Codenation/squad-2-ad-react-sas-1/src/components/ProductDetail/ProductDetail.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getProducts } from '../../services/products';\nimport { setProductDetail, getProductsRequest, addItem } from '../../actions/products';\nimport Loading from '../Loading/';\nimport { urlParser } from '../../modules/urlParser';\nimport './ProductDetail.scss';\n\nconst ProductDetail = () => {\n  const dispatch = useDispatch();\n  const selectedProduct = useSelector(state => state.products.product);\n  const products = useSelector(state => state.products.products);\n  const cart = useSelector(state => state.products.cart);\n  const [selectedSize, setSelectedSize] = useState('');\n\n  const handleGetProducts = () => {\n    getProducts().then(data => dispatch(getProductsRequest(data)));\n  };\n\n  const handleAddItem = ({\n    sku,\n    size\n  }) => dispatch(addItem({\n    sku,\n    size,\n    selectedProduct\n  }));\n\n  const handleSetSize = size => setSelectedSize(size);\n\n  useEffect(() => {\n    console.log(cart);\n  }, [cart]);\n  useEffect(() => {\n    if (products.length > 0) {\n      const message = urlParser();\n      dispatch(setProductDetail(message));\n    } else {\n      handleGetProducts();\n    }\n  }, [products, selectedProduct, window.location.pathname]);\n  {\n    /* console.log(selectedProduct); */\n  }\n\n  if (!Object.keys(selectedProduct).length) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 12\n      }\n    });\n  }\n\n  {\n    /* console.log(selectedSize); */\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: selectedProduct.image,\n    alt: \"nome do produto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product__price__price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, selectedProduct.actual_price), selectedProduct.actual_price !== selectedProduct.regular_price && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product__price__discount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, selectedProduct.regular_price)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, selectedProduct.name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__size\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, selectedProduct.sizes && selectedProduct.sizes.filter(({\n    available\n  }) => available).map(item => /*#__PURE__*/React.createElement(\"span\", {\n    key: item.sku,\n    sku: item.sku,\n    onClick: () => handleSetSize(item),\n    className: ` ${item.sku === selectedSize.sku ? 'is-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }, item.size))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add__cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn__cart\",\n    onClick: () => handleAddItem(selectedSize),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"adicionar ao carrinho\")))));\n};\n\nexport default ProductDetail;","map":{"version":3,"sources":["/Users/nicoli/Documents/Codenation/squad-2-ad-react-sas-1/src/components/ProductDetail/ProductDetail.jsx"],"names":["React","useState","useEffect","useDispatch","useSelector","getProducts","setProductDetail","getProductsRequest","addItem","Loading","urlParser","ProductDetail","dispatch","selectedProduct","state","products","product","cart","selectedSize","setSelectedSize","handleGetProducts","then","data","handleAddItem","sku","size","handleSetSize","console","log","length","message","window","location","pathname","Object","keys","image","actual_price","regular_price","name","sizes","filter","available","map","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getProducts } from '../../services/products';\nimport {\n  setProductDetail,\n  getProductsRequest,\n  addItem,\n} from '../../actions/products';\nimport Loading from '../Loading/';\nimport { urlParser } from '../../modules/urlParser';\n\nimport './ProductDetail.scss';\n\nconst ProductDetail = () => {\n  const dispatch = useDispatch();\n  const selectedProduct = useSelector((state) => state.products.product);\n  const products = useSelector((state) => state.products.products);\n  const cart = useSelector((state) => state.products.cart);\n\n  const [selectedSize, setSelectedSize] = useState('');\n\n  const handleGetProducts = () => {\n    getProducts().then((data) => dispatch(getProductsRequest(data)));\n  };\n\n  const handleAddItem = ({ sku, size }) =>\n    dispatch(addItem({ sku, size, selectedProduct }));\n\n  const handleSetSize = (size) => setSelectedSize(size);\n\n  useEffect(() => {\n    console.log(cart);\n  }, [cart]);\n\n  useEffect(() => {\n    if (products.length > 0) {\n      const message = urlParser();\n\n      dispatch(setProductDetail(message));\n    } else {\n      handleGetProducts();\n    }\n  }, [products, selectedProduct, window.location.pathname]);\n\n  {\n    /* console.log(selectedProduct); */\n  }\n\n  if (!Object.keys(selectedProduct).length) {\n    return <Loading />;\n  }\n\n  {\n    /* console.log(selectedSize); */\n  }\n\n  return (\n    <div className=\"product\">\n      <div className=\"product__body\">\n        <div className=\"product__image\">\n          <img src={selectedProduct.image} alt=\"nome do produto\" />\n        </div>\n\n        <div className=\"product__details\">\n          <div className=\"product__price\">\n            <span className=\"product__price__price\">\n              {selectedProduct.actual_price}\n            </span>\n            {selectedProduct.actual_price !== selectedProduct.regular_price && (\n              <span className=\"product__price__discount\">\n                {selectedProduct.regular_price}\n              </span>\n            )}\n          </div>\n\n          <div className=\"product__desc\">\n            <p>{selectedProduct.name}</p>\n          </div>\n\n          <div className=\"product__size\">\n            {selectedProduct.sizes &&\n              selectedProduct.sizes\n                .filter(({ available }) => available)\n                .map((item) => (\n                  <span\n                    key={item.sku}\n                    sku={item.sku}\n                    onClick={() => handleSetSize(item)}\n                    className={` ${\n                      item.sku === selectedSize.sku ? 'is-active' : ''\n                    }`}\n                  >\n                    {item.size}\n                  </span>\n                ))}\n          </div>\n\n          <div className=\"add__cart\">\n            <button\n              className=\"btn__cart\"\n              onClick={() => handleAddItem(selectedSize)}\n            >\n              adicionar ao carrinho\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;\n"]},"metadata":{},"sourceType":"module"}